seed: 42 #Global RNG seed

training:
  total_timesteps: 120000
  fee_rate: 0.0
  # New parameters for iterative training
  max_iterations: 100
  improvement_threshold: 0.20
  additional_timesteps: 1000
  n_stagnant_loops: 20
  verbose: 0  # 0 for minimal output, 1 for normal, 2 for detailed
  # Evaluation metric configuration
  evaluation:
    metric: "return"  # Options: "return" (total return percentage), "hit_rate" (percentage of profitable trades), or "prediction_accuracy" (percentage of correct price direction predictions)

data:
  train_ratio: 0.6
  validation_ratio: 0.2
  test_ratio: 0.2
  market_hours_only: true  # Filter data to only include NYSE market hours (9:30 AM to 4:00 PM ET, Monday to Friday)

indicators:
  supertrend:
    enabled: true
    length: 20
    multiplier: 4
    smooth_periods: 3
    lookback_periods: 2
  rsi:
    enabled: true
    length: 14
  cci:
    enabled: true
    length: 20
  adx:
    enabled: true
    length: 14
  adx_pos:
    enabled: true
  adx_neg:
    enabled: true
  stoch_k:
    enabled: true
    length: 14
  stoch_d:
    enabled: true
    length: 3
  macd:
    enabled: true
    fast: 12
    slow: 26
    signal: 9
  roc:
    enabled: true
    length: 10
  williams_r:
    enabled: true
    length: 14
  sma:
    enabled: true
    length: 20
  ema:
    enabled: true
    length: 20
  disparity:
    enabled: true
  atr:
    enabled: true
    length: 14
  obv:
    enabled: true
  cmf:
    enabled: true
    length: 20
  psar:
    enabled: true
    af: 0.02
    max_af: 0.2
  volume:
    enabled: true
    ma_length: 20
  vwap:
    enabled: true
  day_of_week:
    enabled: true
  minutes_since_open:
    enabled: true
  z_score:
    enabled: true
    length: 50  # Lookback period for calculating rolling mean and std
  rrcf_anomaly:
    enabled: false
    window_size: 100  # Size of sliding window for RRCF calculation
    num_trees: 64     # Number of trees in the forest (reduced from 40 for speed)
    tree_size: 256    # Maximum size of each tree (reduced from 256 for speed)
    feature_cols: ["close"]  # Features to use for anomaly detection
    random_seed: 42   # Random seed for reproducibility

environment:
  initial_balance: 10000.0
  position_size: 1  # Number of NQ futures contracts to trade (default: 1)
  transaction_cost: 0.0  # Transaction cost as percentage

model:
  ent_coef: 0.00011640494075069245
  learning_rate: 0.0029977835304081614
  n_steps: 562
  batch_size: 22
  gamma: 0.95
  gae_lambda: 0.95
  use_lr_decay: true

# Risk management configuration for trade.py
risk_management:
  # Enable/disable risk management features
  enabled: true  # Master switch to enable/disable all risk management
  
  # Daily risk limit configuration
  daily_risk_limit:
    enabled: false  # Enable/disable daily risk limit
    max_daily_loss: 3000.0  # Maximum dollar loss allowed per trading day
    daily_take_profit: 2000.0  # Maximum profit target for the day, stop trading when reached
  
  # Stop loss configuration
  stop_loss:
    enabled: false 
    mode: "percentage"  # Options: "percentage", "atr"
    percentage: 17  # Stop loss as percentage of portfolio value (used when mode="percentage")
    atr_multiplier: 5.0  # Stop loss as multiple of ATR (used when mode="atr")
  
  # Take profit configuration
  take_profit:
    enabled: true 
    mode: "percentage"  # Options: "percentage", "atr"
    percentage: 20  # Take profit as percentage of portfolio value (used when mode="percentage")
    atr_multiplier: 5.0  # Take profit as multiple of ATR (used when mode="atr")
  
  # Trailing stop loss configuration
  trailing_stop:
    enabled: false
    percentage: 1.0  # Trailing stop as percentage of highest/lowest price
  
  # Position sizing configuration
  position_sizing:
    enabled: false
    size_multiplier: 1.0  # Position size as a multiplier (1.0 = 100% of available capital)
    max_risk_per_trade_percentage: 1.0  # Maximum risk per trade as percentage of portfolio

# Walk-forward testing configuration
walk_forward:
  enabled: true
  window_size: 120
  step_size: 30
  parallel_processing:
    enabled: true   # Enable parallel processing for walk-forward windows
    n_processes: 0  # Auto-detect number of CPU cores
    max_workers: 0  # Use all available workers

# Hyperparameter tuning configuration
hyperparameter_tuning:
  enabled: true
  n_trials: 30
  parallel_processing:
    enabled: false  # Disable parallel processing for hyperparameter tuning
    n_jobs: 1      # Use single process for tuning
  # Parameters to tune (these are the search spaces)
  parameters:
    learning_rate: 
      min: 0.00001
      max: 0.001
      log: true
    n_steps:
      min: 500
      max: 2000
      log: true
    ent_coef:
      min: 0.00001
      max: 0.5
      log: true
    batch_size:
      min: 8
      max: 128
      log: true
    # Fixed values for gamma and gae_lambda
    gamma: 0.995  # Fixed value instead of search range
    gae_lambda: 0.95  # Fixed value instead of search range

# Pretraining configuration
pretraining:
  enabled: true  # Enable/disable pretraining on synthetic data
  timesteps: 500  # Number of timesteps to train on each synthetic file
  synthetic_data_dir: "./synthetic_normalized"  # Directory containing synthetic data files
  
  # Hyperparameter tuning specifically for pretraining
  hyperparameter_tuning:
    enabled: false  # Enable/disable hyperparameter tuning for pretraining
    n_trials: 20   # Number of trials for pretraining hyperparameter optimization
    sample_files: 50  # Number of synthetic files to use for evaluation during tuning (for speed)
    parallel_processing:
      enabled: true  # Enable parallel processing for pretraining hyperparameter tuning
      n_jobs: 0     # Auto-detect number of CPU cores (0 = use all cores)
    
    # Parameters to tune for pretraining (can be different from main training)
    parameters:
      learning_rate: 
        min: 0.00001
        max: 0.01
        log: true
      n_steps:
        min: 256
        max: 2048
        log: true
      ent_coef:
        min: 0.00001
        max: 0.1
        log: true
      batch_size:
        min: 16
        max: 128
        log: true
      # Pretraining-specific parameter: timesteps per synthetic file
      timesteps_per_file:
        min: 500
        max: 5000
        log: false  # Linear scale for timesteps
      # Fixed values for gamma and gae_lambda
      gamma: 0.995  # Fixed value instead of search range
      gae_lambda: 0.95  # Fixed value instead of search range
